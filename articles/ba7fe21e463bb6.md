---
title: "SwiftPMã§iOSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹æˆã—ã¦ã¿ã‚‹"
emoji: "ğŸ“¦"
type: "tech"
topics:
  - "ios"
  - "xcode"
  - "spm"
published: true
published_at: "2021-05-12 21:44"
---

# æ¦‚è¦
[2021å¹´4æœˆ22æ—¥ã®Swiftæ„›å¥½ä¼š](https://love-swift.connpass.com/event/209864/)ã«ã¦ã€d_dateã•ã‚“ãŒã€ŒSwift PM centered iOS Developmentã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ç™ºè¡¨ã„ãŸã ã„ãŸè«‡ç¾©ãŒèˆˆå‘³æ·±ãã€è‡ªåˆ†ã§ã‚‚å®Ÿéš›ã«ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã§çµ„ã‚“ã§ã¿ã‚ˆã†ã¨æ€ã£ãŸãŸã‚ã€è‡ªåˆ†ãŒè¡Œã£ãŸæ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã®æ¦‚è¦
è«‡ç¾©å†…ã§ç´¹ä»‹ã•ã‚Œã¦ã„ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã«ã¤ã„ã¦ã€ç°¡å˜ã«èª¬æ˜ã—ã¦ãŠãã¾ã™ã€‚

è¤‡æ•°äººã§é–‹ç™ºã—ã¦ã„ã‚‹ã¨`.xcodeproj`ãŒã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã™ã‚‹ã“ã¨ãŒã‚ã‚Šã€ãã®è§£æ±ºç­–ã¨ã—ã¦XcodeGenã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚å¤šã„ã¨æ€ã„ã¾ã™ã€‚
ãŸã XcodeGenã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯å­¦ç¿’ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚Šã€ã¾ãŸproject.ymlã®ç®¡ç†ã‚‚ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
ãã“ã§ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆä»¥å¤–ã«é–¢ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’Packageã«æ›¸ãã“ã¨ã§`.xcodeproj`ã«å¤‰æ›´ã‚’åŠ ãˆãšã«é–‹ç™ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

:::message
è©³ã—ãçŸ¥ã‚ŠãŸã„æ–¹ã¯ã€ä¸€åº¦[æœ¬è¨˜äº‹](https://www.notion.so/Swift-PM-Build-Configuration-4f14ceac795a4338a5a44748adfeaa40)ã‚’èª­ã‚“ã§ã¿ã¦ãã ã•ã„ã€‚
:::

# æ§‹æˆæ‰‹é †
å¤§ããªæµã‚Œã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
1. workspaceã®ä½œæˆ
2. Staging projectã¨Production projectã®ä½œæˆ
3. workspaceã«xcodeprojã‚’è¿½åŠ 
4. Packageã‚’è¿½åŠ 

## 1.Workspaceã®ä½œæˆ
ã¾ãšãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ãŠãã¾ã™ã€‚
```
mkdir SwiftPMForiOS 
```
ãã®å¾ŒXcodeã‚’é–‹ãã€ã€ŒFileã€ -> ã€ŒNewã€ -> ã€ŒWorkspaceã€ã‹ã‚‰å…ˆç¨‹ä½œæˆã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«workspaceã‚’ä½œæˆã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/yni3fmhnzbjitd88h0adrh56snvp =500x)

## 2.Projectã®ä½œæˆ
å…ˆã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é…ç½®ã™ã‚‹ãŸã‚ã®ã€Appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¦ãŠãã¾ã™ã€‚
```
mkdir SwiftPMForiOS/App
```
æ¬¡ã«ã€ŒFileã€ -> ã€ŒNewã€ -> ã€ŒProjectã€ã§Stagingç”¨ã®projectã‚’ä½œæˆã—ã¾ã™ã€‚
ä¿å­˜å…ˆã¯å…ˆç¨‹ä½œæˆã—ãŸworkspaceã¨åŒã˜éšå±¤ã«ã—ã¦ãŠãã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/bz05f1tmq9jiy9a9c5uf8zntgopm =500x)

ã“ã“ã¾ã§ã®ä½œæ¥­ã§ç¾åœ¨ã®æ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/xbrtcbsapx51ga3xo18i0rarcpq2)

Stagingé…ä¸‹ã®ã‚‚ã®ã‚’Appé…ä¸‹ã«ç§»å‹•ã—ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚‚iOSã«å¤‰æ›´ã—ã¦ãŠãã¾ã™ã€‚ä¸è¦ãªStagingãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯å‰Šé™¤ã—ã¦ãŠãã¾ã™ã€‚ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹æˆã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/dthv8gr6ss6q5n7onf7gi3vrj1bw)

ã“ã®çŠ¶æ…‹ã§Staging.xcodeprojã‚’é–‹ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«èµ¤ããªã£ã¦ã„ã‚‹ã®ã§ã€Xcodeã®å³å´ã«ã‚ã‚‹Inspectorã‹ã‚‰æ­£ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚
![](https://storage.googleapis.com/zenn-user-upload/myibqkgv001lwabi51il7pa91lmx =500x)

ã¾ãŸBuild Settingsã®ä»¥ä¸‹é …ç›®ã‚‚ä¿®æ­£ã—ã¦ãŠãã¾ã™ã€‚
|é …ç›®å|å¤‰æ›´å‰|å¤‰æ›´å¾Œ|
|:--:|:--:|:--:|
|Development Assets|Staging/Preview Content"|iOS/Preview Content|
|Info.plist File|Staging/Info.plist|iOS/Info.plist|

ä¸Šè¨˜ã¨åŒæ§˜ã®æ‰‹é †ã§Productionç”¨ã®projectã‚‚ä½œæˆã—ã¦ãã ã•ã„ã€‚
:::message
Productionç”¨ã®projectä½œæˆæ™‚ã«è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ProductionApp.swiftãªã©ã¯å‰Šé™¤ã—ã€Stagingç”¨ã®projectä½œæˆæ™‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã™ã‚‹ã»ã†ãŒè‰¯ã•ãã†ã§ã™ã€‚
:::

## 4.Workspaceã«Projectã‚’è¿½åŠ 
ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†…å®¹ã‚’è¡¨ç¤ºã€ã‹ã‚‰contents.xcworkspacedataã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ãã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã«ã—ã¦ãŠãã¾ã™ã€‚
```
<?xml version="1.0" encoding="UTF-8"?>
<Workspace
   version = "1.0">
   <FileRef
      location = "group:App/Staging.xcodeproj">
   </FileRef>
   <FileRef
      location = "group:App/Production.xcodeproj">
   </FileRef>
   <FileRef
      location = "group:">
   </FileRef>
</Workspace>
```
`location = "group:"`ã«ã¤ã„ã¦ã¯ã€æ¬¡ã®Packageã‚’è¿½åŠ ã™ã‚‹éš›ã«Xcodeã‹ã‚‰å‚ç…§ã•ã‚Œã‚‹ãŸã‚ã«å¿…è¦ãªã®ã§ã€ã‚ã‚‰ã‹ã˜ã‚è¨˜è¿°ã—ã¦ãŠãã¾ã™ã€‚
ã“ã“ã¾ã§ã®ä½œæ¥­ã§ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹æˆã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/26dp203g1fz5ns9vpgvgl6obgm8p =500x)

## 5.Packageã‚’è¿½åŠ 
Packageã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¿½åŠ ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/nyrl1ld09s4g54j8dixhtbva6rsl =500x)

ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹æˆã«ãªã‚‹ã®ã§ã€
![](https://storage.googleapis.com/zenn-user-upload/i8te07oxg8028mqwmct43l1r4mz9 =500x)
SamplePackageãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ã‚‚ã®ã‚’ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«ç§»å‹•ã—ã€SamplePackageãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/eh3lcu5bq3oi77r08mv2sgvcv3p3 =500x)

ã“ã®ã¾ã¾ã§ã¯Appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚Packageã«å«ã¾ã‚Œã¦ã—ã¾ã†ã®ã§ã€Appãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã«Package.swiftã‚’ç”¨æ„ã—ã€ä»¥ä¸‹ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§å‚ç…§ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚
```swift
import PackageDescription

let package = Package(
  name: "client",
  products: [],
  targets: []
)
```

Projectã«ä½œæˆã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒªãƒ³ã‚¯ã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/95gyojz04smuzw4nlsew2jg4nmfj)

æœ€çµ‚çš„ã«ä»¥ä¸‹ã®æ§˜ãªæ§‹æˆã«ãªã‚Šã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/51kgtry7qmqvor25je2h6tygu7tj)

# ã¾ã¨ã‚
ä»Šå›ç´¹ä»‹ã—ãŸæ§‹æˆã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’githubã«ä¸Šã’ã¦ç½®ã„ãŸã®ã§ã€è‰¯ã‘ã‚Œã°å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
ã¾ãŸè‡ªåˆ†ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹æˆã™ã‚‹ã®ãŒé¢å€’ãªæ–¹ã€ãƒªãƒã‚¸ãƒˆãƒªã‚’zipã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—workspaceåã¨ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’ä»»æ„ã®åå‰ã«å¤‰æ›´ã™ã‚‹ã¨ã™ãä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

https://github.com/yogita109/iOSTemplate

# å‚è€ƒURL
- https://www.notion.so/Swift-PM-Build-Configuration-4f14ceac795a4338a5a44748adfeaa40
- https://www.icloud.com/keynote/0PCvIw40krfy74SJfdjDEQCcg#SwiftPM-centered-ios-development
- https://www.youtube.com/watch?v=0DeC672gFto&t=3724s